<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OhMyShokz</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app">
      <h1>OhMyShokz</h1>
      <p class="subtitle">YouTube 구간 선택 MP3 생성기</p>

      <div class="panel">
        <label for="urlInput">YouTube 링크</label>
        <div class="row">
          <input id="urlInput" type="text" placeholder="https://www.youtube.com/watch?v=..." />
          <button id="loadVideoButton">영상 불러오기</button>
        </div>
      </div>

      <div class="video-panel">
        <div id="videoFrame"></div>
        <div id="fallbackPanel" class="fallback-panel hidden">
          <div class="fallback-header">
            <strong id="fallbackTitle">임베드 불가 영상</strong>
            <span class="hint">아래 바에서 시작/종료를 잡으세요.</span>
          </div>
          <div class="fallback-controls">
            <label for="fallbackStartRange">시작</label>
            <input id="fallbackStartRange" type="range" min="0" max="100" value="0" />
            <span id="fallbackStartLabel">00:00:00</span>
          </div>
          <div class="fallback-controls">
            <label for="fallbackEndRange">종료</label>
            <input id="fallbackEndRange" type="range" min="0" max="100" value="100" />
            <span id="fallbackEndLabel">00:01:40</span>
          </div>
          <button id="applyFallbackRangeButton">바 시간 적용</button>
        </div>
        <div class="row player-actions">
          <button id="setStartFromPlayerButton">현재 시각을 시작으로</button>
          <button id="setEndFromPlayerButton">현재 시각을 종료로</button>
          <button id="openInBrowserButton">브라우저로 열기</button>
        </div>
      </div>

      <div class="panel">
        <div class="time-grid">
          <div>
            <label for="startInput">시작 시간</label>
            <input id="startInput" type="text" placeholder="00:00:30" />
          </div>
          <div>
            <label for="endInput">종료 시간</label>
            <input id="endInput" type="text" placeholder="00:01:20" />
          </div>
        </div>
        <p class="hint">형식: HH:MM:SS 또는 MM:SS</p>
      </div>

      <div class="panel">
        <label>저장 폴더</label>
        <div class="row">
          <input id="folderInput" type="text" readonly placeholder="저장 폴더를 선택하세요" />
          <button id="pickFolderButton">폴더 선택</button>
        </div>
      </div>

      <div class="panel actions">
        <button id="downloadButton" class="download">MP3 생성</button>
        <button id="addToQueueButton">리스트에 저장</button>
        <button id="downloadQueueButton">리스트 일괄 변환</button>
        <button id="installToolsButton">도구 자동 설치</button>
        <button id="refreshFilesButton">파일 목록 새로고침</button>
        <span id="statusText">준비됨</span>
      </div>

      <div class="panel">
        <div class="list-header">
          <strong>영상 저장 리스트</strong>
          <span class="hint">링크를 저장해두고 나중에 MP3 변환할 수 있습니다.</span>
        </div>
        <div id="queueList" class="queue-list"></div>
      </div>

      <div class="panel">
        <label>Shokz 기기 폴더</label>
        <div class="row">
          <select id="deviceSelect"></select>
          <button id="refreshDevicesButton">기기 검색</button>
          <button id="pickDeviceFolderButton">직접 선택</button>
        </div>
        <p class="hint">/Volumes 기준 자동 탐지 후 후보를 보여줍니다.</p>
      </div>

      <div class="panel">
        <div class="list-header">
          <strong>MP3 파일 목록</strong>
          <span class="hint">전송 상태: 기기 폴더에 같은 파일명이 있으면 전송됨</span>
        </div>
        <div id="filesList" class="file-list"></div>
      </div>

      <details>
        <summary>로그</summary>
        <pre id="logText"></pre>
      </details>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="./renderer.js"></script>
  </body>
</html>
